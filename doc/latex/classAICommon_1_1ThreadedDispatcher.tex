\hypertarget{classAICommon_1_1ThreadedDispatcher}{}\doxysection{AICommon\+::Threaded\+Dispatcher Class Reference}
\label{classAICommon_1_1ThreadedDispatcher}\index{AICommon::ThreadedDispatcher@{AICommon::ThreadedDispatcher}}


A dispatcher that does all the work on a single, separate thread started in constructor.  




{\ttfamily \#include $<$Threaded\+Dispatcher.\+h$>$}



Inheritance diagram for AICommon\+::Threaded\+Dispatcher\+:
% FIG 0


Collaboration diagram for AICommon\+::Threaded\+Dispatcher\+:
% FIG 1
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \mbox{\hyperlink{classAICommon_1_1ThreadedDispatcher_a82f37e1c9e1bea9ac804fea058c58f2b}{post}} (std\+::function$<$ void()$>$ work) final
\item 
virtual void \mbox{\hyperlink{classAICommon_1_1ThreadedDispatcher_a8f8a05defb37bacf6879bb97fadcdb1a}{sync}} () final
\begin{DoxyCompactList}\small\item\em Ensures that anything that was in the queue before the call has been executed before returning. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classAICommon_1_1ThreadedDispatcher_af182a714555379bd3e32fae531d3db5a}\label{classAICommon_1_1ThreadedDispatcher_af182a714555379bd3e32fae531d3db5a}} 
virtual bool \mbox{\hyperlink{classAICommon_1_1ThreadedDispatcher_af182a714555379bd3e32fae531d3db5a}{invoked\+From\+Dispatcher\+Thread}} () final
\begin{DoxyCompactList}\small\item\em Get dispatcher thread Id. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classAICommon_1_1ThreadedDispatcher_aa5fdf60cbe99190d5dc3a860551f8340}\label{classAICommon_1_1ThreadedDispatcher_aa5fdf60cbe99190d5dc3a860551f8340}} 
void \mbox{\hyperlink{classAICommon_1_1ThreadedDispatcher_aa5fdf60cbe99190d5dc3a860551f8340}{flush}} ()
\begin{DoxyCompactList}\small\item\em Perform any work remaining in the queue, then stop accepting new work. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classAICommon_1_1ThreadedDispatcher_a09c13f9349c7fa13fe92c5e82fea6f39}\label{classAICommon_1_1ThreadedDispatcher_a09c13f9349c7fa13fe92c5e82fea6f39}} 
void \mbox{\hyperlink{classAICommon_1_1ThreadedDispatcher_a09c13f9349c7fa13fe92c5e82fea6f39}{stop}} ()
\begin{DoxyCompactList}\small\item\em Cancels any work that is not already in progress, stop accepting new work. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classAICommon_1_1ThreadedDispatcher_a8cc919307ebc5d4737e0edd54b222129}\label{classAICommon_1_1ThreadedDispatcher_a8cc919307ebc5d4737e0edd54b222129}} 
{\bfseries Threaded\+Dispatcher} (const std\+::string \&name=std\+::string())
\item 
\mbox{\hyperlink{classAICommon_1_1ThreadedDispatcher_a1333d069a575c85201e69f589cde06a2}{Threaded\+Dispatcher}} (int priority, const std\+::string \&name=std\+::string())
\end{DoxyCompactItemize}
\doxysubsection*{Private Types}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classAICommon_1_1ThreadedDispatcher_aba6afa217d7bfb9cd576e1c94810d09c}\label{classAICommon_1_1ThreadedDispatcher_aba6afa217d7bfb9cd576e1c94810d09c}} 
typedef \mbox{\hyperlink{classAICommon_1_1ThreadedDispatcher}{Threaded\+Dispatcher}} {\bfseries This}
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classAICommon_1_1ThreadedDispatcher_aaff8ba52182fb514199f4dc056e6ced2}\label{classAICommon_1_1ThreadedDispatcher_aaff8ba52182fb514199f4dc056e6ced2}} 
bool \mbox{\hyperlink{classAICommon_1_1ThreadedDispatcher_aaff8ba52182fb514199f4dc056e6ced2}{has\+More\+Work\+Or\+Was\+Stop\+Requested}} ()
\begin{DoxyCompactList}\small\item\em Predicate for condition variable used communication with the worker thread. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classAICommon_1_1ThreadedDispatcher_ae5b08698c26a3f4cf560a042315f219a}\label{classAICommon_1_1ThreadedDispatcher_ae5b08698c26a3f4cf560a042315f219a}} 
void \mbox{\hyperlink{classAICommon_1_1ThreadedDispatcher_ae5b08698c26a3f4cf560a042315f219a}{do\+Work}} (const std\+::string \&name, int priority)
\begin{DoxyCompactList}\small\item\em The dispatcher thread entry point. \end{DoxyCompactList}\item 
std\+::function$<$ void()$>$ \mbox{\hyperlink{classAICommon_1_1ThreadedDispatcher_a18cb603c87981b555ba9ae8515d0d684}{next}} ()
\begin{DoxyCompactList}\small\item\em Returns next work item. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classAICommon_1_1ThreadedDispatcher_ab011c8dd890120cbcca2c0062de26eb7}\label{classAICommon_1_1ThreadedDispatcher_ab011c8dd890120cbcca2c0062de26eb7}} 
std\+::mutex {\bfseries m}
\item 
\mbox{\Hypertarget{classAICommon_1_1ThreadedDispatcher_ae0d279b5c98a2af780b10886a98a0af7}\label{classAICommon_1_1ThreadedDispatcher_ae0d279b5c98a2af780b10886a98a0af7}} 
std\+::condition\+\_\+variable {\bfseries cv}
\item 
\mbox{\Hypertarget{classAICommon_1_1ThreadedDispatcher_a17475cebe46fdb64079dc7c54a5d62fb}\label{classAICommon_1_1ThreadedDispatcher_a17475cebe46fdb64079dc7c54a5d62fb}} 
bool {\bfseries running}
\item 
\mbox{\Hypertarget{classAICommon_1_1ThreadedDispatcher_af7172b5eac1981caf8b6e34b4a4bbab9}\label{classAICommon_1_1ThreadedDispatcher_af7172b5eac1981caf8b6e34b4a4bbab9}} 
std\+::deque$<$ std\+::function$<$ void()$>$ $>$ {\bfseries q}
\item 
\mbox{\Hypertarget{classAICommon_1_1ThreadedDispatcher_a114e3bf58b15b72ea838331db168ce74}\label{classAICommon_1_1ThreadedDispatcher_a114e3bf58b15b72ea838331db168ce74}} 
std\+::thread {\bfseries t}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
A dispatcher that does all the work on a single, separate thread started in constructor. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classAICommon_1_1ThreadedDispatcher_a1333d069a575c85201e69f589cde06a2}\label{classAICommon_1_1ThreadedDispatcher_a1333d069a575c85201e69f589cde06a2}} 
\index{AICommon::ThreadedDispatcher@{AICommon::ThreadedDispatcher}!ThreadedDispatcher@{ThreadedDispatcher}}
\index{ThreadedDispatcher@{ThreadedDispatcher}!AICommon::ThreadedDispatcher@{AICommon::ThreadedDispatcher}}
\doxysubsubsection{\texorpdfstring{ThreadedDispatcher()}{ThreadedDispatcher()}}
{\footnotesize\ttfamily AICommon\+::\+Threaded\+Dispatcher\+::\+Threaded\+Dispatcher (\begin{DoxyParamCaption}\item[{int}]{priority,  }\item[{const std\+::string \&}]{name = {\ttfamily std\+:\+:string()} }\end{DoxyParamCaption})}

Creates a dispatcher with supplied SCHED\+\_\+\+RR priority value and a thread name 

\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classAICommon_1_1ThreadedDispatcher_a18cb603c87981b555ba9ae8515d0d684}\label{classAICommon_1_1ThreadedDispatcher_a18cb603c87981b555ba9ae8515d0d684}} 
\index{AICommon::ThreadedDispatcher@{AICommon::ThreadedDispatcher}!next@{next}}
\index{next@{next}!AICommon::ThreadedDispatcher@{AICommon::ThreadedDispatcher}}
\doxysubsubsection{\texorpdfstring{next()}{next()}}
{\footnotesize\ttfamily std\+::function$<$ void()$>$ AICommon\+::\+Threaded\+Dispatcher\+::next (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Returns next work item. 

\begin{DoxyNote}{Note}
This function assumes that there is work to be done and that the mutex is acquired. 
\end{DoxyNote}
\mbox{\Hypertarget{classAICommon_1_1ThreadedDispatcher_a82f37e1c9e1bea9ac804fea058c58f2b}\label{classAICommon_1_1ThreadedDispatcher_a82f37e1c9e1bea9ac804fea058c58f2b}} 
\index{AICommon::ThreadedDispatcher@{AICommon::ThreadedDispatcher}!post@{post}}
\index{post@{post}!AICommon::ThreadedDispatcher@{AICommon::ThreadedDispatcher}}
\doxysubsubsection{\texorpdfstring{post()}{post()}}
{\footnotesize\ttfamily void AICommon\+::\+Threaded\+Dispatcher\+::post (\begin{DoxyParamCaption}\item[{std\+::function$<$ void()$>$}]{work }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}

Post an item of work to be executed on the thread owned by this dispatcher. 

Implements \mbox{\hyperlink{classAICommon_1_1IDispatcher_a7d488400d6249dc3456feaf1ad80e860}{AICommon\+::\+IDispatcher}}.

\mbox{\Hypertarget{classAICommon_1_1ThreadedDispatcher_a8f8a05defb37bacf6879bb97fadcdb1a}\label{classAICommon_1_1ThreadedDispatcher_a8f8a05defb37bacf6879bb97fadcdb1a}} 
\index{AICommon::ThreadedDispatcher@{AICommon::ThreadedDispatcher}!sync@{sync}}
\index{sync@{sync}!AICommon::ThreadedDispatcher@{AICommon::ThreadedDispatcher}}
\doxysubsubsection{\texorpdfstring{sync()}{sync()}}
{\footnotesize\ttfamily void AICommon\+::\+Threaded\+Dispatcher\+::sync (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [final]}, {\ttfamily [virtual]}}



Ensures that anything that was in the queue before the call has been executed before returning. 

Ensures that any items in the dispatch queue before this call are processed before the function returns.

The function blocks until everything in the queue prior to the call is processed.

It works by putting a dummy work item on the queue which takes a reference to a local conditional variable, we then wait on the conditional triggering. 

Implements \mbox{\hyperlink{classAICommon_1_1IDispatcher_a7e2c831333f742bde55ba5d83223ea7d}{AICommon\+::\+IDispatcher}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
App\+Infrastructure/\+Common/include/Threaded\+Dispatcher.\+h\item 
App\+Infrastructure/\+Common/source/Threaded\+Dispatcher.\+cpp\end{DoxyCompactItemize}
